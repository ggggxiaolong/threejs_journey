import{S as C,j as n,d as D,D as R,af as M,a as v,B as x,c as I,t as L}from"./three.module-2fef69e5.js";import{Size as V}from"./model-76944e9e.js";import{U as d}from"./utils-315ca8db.js";import"./OrbitControls-916b91d8.js";const u=V.getInstance(),c=new C,m=d.initCamera(u),f=d.initRenderer(u),q=d.initControl(m,f),b=new Array,T=new L;let p,w;window.Ammo().then(U);function U(){const t=new Ammo.btDefaultCollisionConfiguration,o=new Ammo.btCollisionDispatcher(t),r=new Ammo.btDbvtBroadphase,a=new Ammo.btSequentialImpulseConstraintSolver;p=new Ammo.btDiscreteDynamicsWorld(o,r,a,t),p.setGravity(new Ammo.btVector3(0,-75,0)),w=new Ammo.btTransform,k(),g(),i(40,new n(15,-30,15),0),i(4,new n(0,10,0),1),i(2,new n(10,30,0),1),i(4,new n(10,20,10),1),i(6,new n(5,40,20),1),i(8,new n(25,100,5),1),i(8,new n(20,60,25),1),i(4,new n(20,100,25),1),i(2,new n(20,200,25),1)}function k(){m.position.set(-25,20,-25),m.lookAt(new n(0,6,0)),d.addAxesHelper(c,1),u.onResize(function(){d.onResize(u,m,f)});const t=new D(13421772,.2);c.add(t);const o=new R(16777215,.6);o.position.set(-1,.9,.4),c.add(o)}function i(t,o,r,a){const s=a||new M(0,0,0,1),e=new v(new x(t,t,t),new I({color:Math.random()*16777215}));e.position.copy(o),c.add(e);const l=new Ammo.btTransform;l.setIdentity(),l.setOrigin(new Ammo.btVector3(o.x,o.y,o.z)),l.setRotation(new Ammo.btQuaternion(s.x,s.y,s.z,s.w));const B=new Ammo.btDefaultMotionState(l),y=new Ammo.btBoxShape(new Ammo.btVector3(t/2,t/2,t/2));y.setMargin(.05);const h=new Ammo.btVector3(0,0,0);y.calculateLocalInertia(r,h);let S=new Ammo.btRigidBodyConstructionInfo(r,B,y,h),A=new Ammo.btRigidBody(S);p.addRigidBody(A),e.userData.physicsBody=A,b.push(e)}function z(t){p.stepSimulation(t,10);for(let o of b){const a=o.userData.physicsBody.getMotionState();if(a){a.getWorldTransform(w);const s=w.getOrigin(),e=w.getRotation();o.position.set(s.x(),s.y(),s.z()),o.quaternion.set(e.x(),e.y(),e.z(),e.w())}}}function g(){const t=T.getDelta();z(t),f.render(c,m),q.update(),requestAnimationFrame(g)}
