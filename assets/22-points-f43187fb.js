import{S as M,P as E,a9 as G,aC as C,$ as b,a5 as D,ae as _,w as k}from"./three.module-67558082.js";import{Size as L,Mouse as B}from"./model-76944e9e.js";import{U as g}from"./utils-612895f9.js";import{G as U}from"./lil-gui.esm-1e0f7d72.js";import"./OrbitControls-3d27026f.js";var P=function(){var c=0,n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",function(o){o.preventDefault(),s(++c%n.children.length)},!1);function i(o){return n.appendChild(o.dom),o}function s(o){for(var a=0;a<n.children.length;a++)n.children[a].style.display=a===o?"block":"none";c=o}var l=(performance||Date).now(),r=l,e=0,f=i(new P.Panel("FPS","#0ff","#002")),m=i(new P.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var y=i(new P.Panel("MB","#f08","#201"));return s(0),{REVISION:16,dom:n,addPanel:i,showPanel:s,begin:function(){l=(performance||Date).now()},end:function(){e++;var o=(performance||Date).now();if(m.update(o-l,200),o>=r+1e3&&(f.update(e*1e3/(o-r),100),r=o,e=0,y)){var a=performance.memory;y.update(a.usedJSHeapSize/1048576,a.jsHeapSizeLimit/1048576)}return o},update:function(){l=this.end()},domElement:n,setMode:s}};P.Panel=function(c,n,i){var s=1/0,l=0,r=Math.round,e=r(window.devicePixelRatio||1),f=80*e,m=48*e,y=3*e,o=2*e,a=3*e,p=15*e,u=74*e,h=30*e,w=document.createElement("canvas");w.width=f,w.height=m,w.style.cssText="width:80px;height:48px";var t=w.getContext("2d");return t.font="bold "+9*e+"px Helvetica,Arial,sans-serif",t.textBaseline="top",t.fillStyle=i,t.fillRect(0,0,f,m),t.fillStyle=n,t.fillText(c,y,o),t.fillRect(a,p,u,h),t.fillStyle=i,t.globalAlpha=.9,t.fillRect(a,p,u,h),{dom:w,update:function(S,I){s=Math.min(s,S),l=Math.max(l,S),t.fillStyle=i,t.globalAlpha=1,t.fillRect(0,0,f,p),t.fillStyle=n,t.fillText(r(S)+" "+c+" ("+r(s)+"-"+r(l)+")",y,o),t.drawImage(w,a+e,p,u-e,h,a,p,u-e,h),t.fillRect(a+u-e,p,e,h),t.fillStyle=i,t.globalAlpha=.9,t.fillRect(a+u-e,p,e,r((1-S/I)*h))}}};const X=P,v=L.getInstance(),T=new M,A=g.initRenderer(v),d=new E(55,v.aspect,2,2e3),H=X();let x;const F=new k,O=new U,R=B.getInstance();W();z();function W(){document.body.appendChild(H.dom),d.position.set(0,0,1e3),R.updateOffset(v.width/2,v.height/2),v.onResize(()=>{g.onResize(v,d,A)});const c=1e3,n=new Array;for(let r=0;r<c;r++){const e=2e3*Math.random()-1e3,f=2e3*Math.random()-1e3,m=2e3*Math.random()-1e3;n.push(e,f,m)}const i=new G;i.setAttribute("position",new C(n,3));const s=new b().load("textures/sprites/disc.png");x=new D({size:35,map:s,sizeAttenuation:!0,alphaTest:.5,transparent:!0}),x.color.setHSL(1,.3,.7),O.add(x,"sizeAttenuation").onChange(()=>{x.needsUpdate=!0});const l=new _(i,x);T.add(l)}function z(){const c=F.getElapsedTime()*20;A.render(T,d),H.update();const n=c%360/360;x.color.setHSL(n,.5,.5),d.position.x+=(R.x-d.position.x)*.05,d.position.y+=(-R.y-d.position.y)*.05,d.lookAt(T.position),requestAnimationFrame(z)}
