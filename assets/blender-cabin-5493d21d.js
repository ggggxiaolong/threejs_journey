import{S as M,Y as x,g as y,z as I,d as O}from"./three.module-2fef69e5.js";import{G as A}from"./GLTFLoader-4f14a869.js";import{D as U,R as $}from"./RoomEnvironment-ea592da9.js";import{Size as H}from"./model-76944e9e.js";import{U as u}from"./utils-315ca8db.js";import{C as P,a as T}from"./CSS2DRenderer-e0655caf.js";import{G as _}from"./lil-gui.esm-1e0f7d72.js";import"./BufferGeometryUtils-de038164.js";import"./OrbitControls-916b91d8.js";const t=H.getInstance(),a=new M,c=u.initCamera(t),l=u.initRenderer(t),w=u.initControl(c,l),D=new A,r=new P,p=8,f=16,s=new x;let E;const j=new _,C={size:5};let b=!1,h=!1;q();L();function q(){const i=new U;i.setDecoderPath("./gltf/"),D.setDRACOLoader(i),r.setSize(t.width,t.height),r.domElement.style.position="absolute",r.domElement.style.top="0px",r.domElement.style.pointerEvents="none",document.body.appendChild(r.domElement),c.position.set(0,12,20),t.onResize(function(){u.onResize(t,c,l),r.setSize(t.width,t.height)}),a.background=new y(3092271);const e=new I(l);a.environment=e.fromScene(new $,.04).texture;const o=new O(16777215,.2);a.add(o),D.load("./models/cabin_001.glb",function(m){console.log(m.scene),E=m.scene,E.rotation.y=-Math.PI/2,v(C.size),j.add(C,"size",1,300,1).onChange(function(){v(C.size)})}),a.add(s)}function v(i){for(console.log("showCabin"),b=!1,h&&(h=!1,L());s.children.length>0;){const n=s.children[0];n.parent?.remove(n)}const e=Math.ceil(Math.sqrt(i)),o=e*(e-1)>=i?e-1:e,m=o*e;console.log(`${o},${e}`);let R=1;for(let n=0;n<o;n++)for(let d=0;d<e;d++){if(i>m-R){const z=E.clone();z.position.set(n*f,0,d*p),s.add(z);const g=document.createElement("div");g.className="label",g.textContent=`sn:${n}-${d}`;const S=new T(g);S.position.set(n*f+3,3,d*p+1),s.add(S)}R+=1}s.position.x=-o*f/2+f/2,s.position.z=-e*p/2+p/2,c.position.set(0,o*5,e*8),b=!0}function L(){l.render(a,c),w.update(),h?w.hasEventListener("change",G)||w.addEventListener("change",G):requestAnimationFrame(L),b&&(h=!0)}function G(){l.render(a,c)}
