import{S as A,Y as D,g as M,z as F,d as G,y as P,j as k,t as O}from"./three.module-2fef69e5.js";import{G as U}from"./GLTFLoader-4f14a869.js";import{D as b,R as I}from"./RoomEnvironment-ea592da9.js";import{Size as q}from"./model-76944e9e.js";import{U as d}from"./utils-315ca8db.js";import{C as N,a as T}from"./CSS2DRenderer-e0655caf.js";import"./BufferGeometryUtils-de038164.js";import"./OrbitControls-916b91d8.js";const t=q.getInstance(),e=new A,o=d.initCamera(t,40,100),s=d.initRenderer(t),p=d.initControl(o,s),E=new U,n=new N,V=new O,C=new D;let l,r=null,L=!1,R=!1;Y();S();function Y(){const h=new b;h.setDecoderPath("./gltf/"),E.setDRACOLoader(h),n.setSize(t.width,t.height),n.domElement.style.position="absolute",n.domElement.style.top="0px",n.domElement.style.pointerEvents="none",document.body.appendChild(n.domElement),o.position.set(0,0,20),t.onResize(function(){d.onResize(t,o,s),n.setSize(t.width,t.height)}),e.background=new M(0);const v=new F(s);e.environment=v.fromScene(new I,.01).texture;const y=new G(16777215,.1);e.add(y),e.add(C),E.load("./models/cabin02.glb",function(i){console.log(i),r=new P(i.scene);const W=i.animations[0],c=r.clipAction(W);c.repetitions=1,c.clampWhenFinished=!0,c.play();const x=i.animations[1],m=r.clipAction(x);m.repetitions=1,m.clampWhenFinished=!0,m.play(),l=i.scene,l.rotation.y=-Math.PI/2,e.add(l);const f=new k;r?.addEventListener("finished",function(z){z.action===c&&(e.updateMatrixWorld(!0),e.traverse(a=>{if(a.name.startsWith("heap")||a.name.startsWith("pcs")||a.name.startsWith("air")||a.name.startsWith("fire")){const u=document.createElement("div");u.className="hot_point",f.setFromMatrixPosition(a.matrixWorld);const w=new T(u);w.position.copy(f),C.add(w)}}),p.hasEventListener("change",g)||p.addEventListener("change",g),L=!0)})})}function S(){s.render(e,o),n.render(e,o),p.update(),r?.update(V.getDelta()),R||requestAnimationFrame(S),L&&(R=!0)}function g(){s.render(e,o),n.render(e,o)}
