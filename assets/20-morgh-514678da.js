import{S as v,j as C,y as M,a9 as R,a as I,s as k,b as D,M as T,g as b,a3 as z,aa as F,d as N,D as j,t as B}from"./three.module-2fef69e5.js";import{G as S}from"./GLTFLoader-4f14a869.js";import{Size as U}from"./model-76944e9e.js";import{U as h}from"./utils-315ca8db.js";import{G as H}from"./lil-gui.esm-1e0f7d72.js";import"./BufferGeometryUtils-de038164.js";import"./OrbitControls-916b91d8.js";const f=U.getInstance(),t=new v,d=h.initCamera(f),u=h.initRenderer(f),P=h.initControl(d,u),q=new S;let p;const V=new B,a=Array(),l=Array(),W=[0,2,6,10],L=Array(),y=Array();let x=0,m=0;const A=new H,c={play:"",mixAction:""};_();function _(){d.position.set(-5,3,10),d.lookAt(new C(0,2,0)),f.onResize(()=>{h.onResize(f,d,u)}),q.load("./gltf/RobotExpressive/RobotExpressive.glb",function(r){console.log(r),t.add(r.scene),p=new M(r.scene),r.animations.forEach((e,s)=>{const g=p.clipAction(e);a.push(g),l.push(e.name),W.includes(s)?L.push(e.name):(y.push(e.name),g.clampWhenFinished=!0,g.loop=R)}),a[0].play(),c.play=l[0],c.mixAction=y[0],A.add(c,"play").options(L).onChange(function(){const e=l.indexOf(c.play);$(e)}),A.add(c,"mixAction").options(y).onChange(function(){const e=l.indexOf(c.mixAction);J(e)});const i=r.scene.getObjectByName("Head_4");if(i instanceof I&&i.morphTargetDictionary&&i.morphTargetInfluences){console.log(i);const e=Object.keys(i.morphTargetDictionary);for(let s=0;s<e.length;s++)A.add(i.morphTargetInfluences,`${s}`,0,1,.1).name(e[s])}E()}),u.outputEncoding=k;const o=new I(new D(200,200),new T({color:16777215}));o.rotation.x=-Math.PI/2,t.add(o),t.background=new b(11316396),t.fog=new z(11316396,10,50);const n=new F(200,40,0,0);n.material.opacity=.2,n.material.transparent=!0,t.add(n);const G=new N(16777215,.4);t.add(G);const w=new j(16777215,1);w.position.set(0,5,2),t.add(w)}function $(o,n=.5){a[m].fadeOut(n),m=o,a[m].reset().fadeIn(n).play()}function J(o,n=.2){x=o,a[m].fadeOut(n),a[x].reset().fadeIn(n).play(),p.addEventListener("finished",O)}function O(){a[x].fadeOut(.2),a[m].reset().fadeIn(.2).play(),p.removeEventListener("finished",O)}function E(){const o=V.getDelta();u.render(t,d),P.update(),p.update(o),requestAnimationFrame(E)}
