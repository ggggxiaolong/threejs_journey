import{J as _,X as V,a9 as U,aC as v,S as J,af as K,l as W,j as Z,V as $,D as X,n as Q,B as ee,f as te,k as oe,a as se,w as ne}from"./three.module-67558082.js";import{U as I,T as ae}from"./utils-612895f9.js";import{C as ce,a as ie}from"./CSS2DRenderer-d82d42d3.js";import{Size as re}from"./model-76944e9e.js";import{G as le}from"./lil-gui.esm-1e0f7d72.js";import"./OrbitControls-3d27026f.js";class de extends _{constructor(o){super(o)}load(o,p,C,m){const a=this,c=new V(a.manager);c.setPath(a.path),c.setRequestHeader(a.requestHeader),c.setWithCredentials(a.withCredentials),c.load(o,function(A){try{p(a.parse(A))}catch(l){m?m(l):console.error(l),a.manager.itemError(o)}},C,m)}parse(o){function p(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function C(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function m(e,u){return"s"+Math.min(e,u)+"e"+Math.max(e,u)}function a(e,u,d,B){const b=parseInt(n[B].slice(e,e+u));if(b){const g=m(d,b);t[g]===void 0&&(i.push([d-1,b-1,1]),t[g]=i.length-1)}}function c(){const e={geometryAtoms:new U,geometryBonds:new U,json:{atoms:l}},u=e.geometryAtoms,d=e.geometryBonds,B=[],b=[],g=[];for(let r=0,M=l.length;r<M;r++){const h=l[r],F=h[0],P=h[1],E=h[2];B.push(F,P,E);const S=h[3][0]/255,z=h[3][1]/255,G=h[3][2]/255;b.push(S,z,G)}for(let r=0,M=i.length;r<M;r++){const h=i[r],F=h[0],P=h[1],E=s[F],S=s[P];let z=E[0],G=E[1],R=E[2];g.push(z,G,R),z=S[0],G=S[1],R=S[2],g.push(z,G,R)}return u.setAttribute("position",new v(B,3)),u.setAttribute("color",new v(b,3)),d.setAttribute("position",new v(g,3)),e}const A={h:[255,255,255],he:[217,255,255],li:[204,128,255],be:[194,255,0],b:[255,181,181],c:[144,144,144],n:[48,80,248],o:[255,13,13],f:[144,224,80],ne:[179,227,245],na:[171,92,242],mg:[138,255,0],al:[191,166,166],si:[240,200,160],p:[255,128,0],s:[255,255,48],cl:[31,240,31],ar:[128,209,227],k:[143,64,212],ca:[61,255,0],sc:[230,230,230],ti:[191,194,199],v:[166,166,171],cr:[138,153,199],mn:[156,122,199],fe:[224,102,51],co:[240,144,160],ni:[80,208,80],cu:[200,128,51],zn:[125,128,176],ga:[194,143,143],ge:[102,143,143],as:[189,128,227],se:[255,161,0],br:[166,41,41],kr:[92,184,209],rb:[112,46,176],sr:[0,255,0],y:[148,255,255],zr:[148,224,224],nb:[115,194,201],mo:[84,181,181],tc:[59,158,158],ru:[36,143,143],rh:[10,125,140],pd:[0,105,133],ag:[192,192,192],cd:[255,217,143],in:[166,117,115],sn:[102,128,128],sb:[158,99,181],te:[212,122,0],i:[148,0,148],xe:[66,158,176],cs:[87,23,143],ba:[0,201,0],la:[112,212,255],ce:[255,255,199],pr:[217,255,199],nd:[199,255,199],pm:[163,255,199],sm:[143,255,199],eu:[97,255,199],gd:[69,255,199],tb:[48,255,199],dy:[31,255,199],ho:[0,255,156],er:[0,230,117],tm:[0,212,82],yb:[0,191,56],lu:[0,171,36],hf:[77,194,255],ta:[77,166,255],w:[33,148,214],re:[38,125,171],os:[38,102,150],ir:[23,84,135],pt:[208,208,224],au:[255,209,35],hg:[184,184,208],tl:[166,84,77],pb:[87,89,97],bi:[158,79,181],po:[171,92,0],at:[117,79,69],rn:[66,130,150],fr:[66,0,102],ra:[0,125,0],ac:[112,171,250],th:[0,186,255],pa:[0,161,255],u:[0,143,255],np:[0,128,255],pu:[0,107,255],am:[84,92,242],cm:[120,92,227],bk:[138,79,227],cf:[161,54,212],es:[179,31,212],fm:[179,31,186],md:[179,13,166],no:[189,13,135],lr:[199,0,102],rf:[204,0,89],db:[209,0,79],sg:[217,0,69],bh:[224,0,56],hs:[230,0,46],mt:[235,0,38],ds:[235,0,38],rg:[235,0,38],cn:[235,0,38],uut:[235,0,38],uuq:[235,0,38],uup:[235,0,38],uuh:[235,0,38],uus:[235,0,38],uuo:[235,0,38]},l=[],i=[],t={},s={},n=o.split(`
`);for(let e=0,u=n.length;e<u;e++)if(n[e].slice(0,4)==="ATOM"||n[e].slice(0,6)==="HETATM"){const d=parseFloat(n[e].slice(30,37)),B=parseFloat(n[e].slice(38,45)),b=parseFloat(n[e].slice(46,53)),g=parseInt(n[e].slice(6,11))-1;let r=p(n[e].slice(76,78)).toLowerCase();r===""&&(r=p(n[e].slice(12,14)).toLowerCase());const M=[d,B,b,A[r],C(r)];l.push(M),s[g]=M}else if(n[e].slice(0,6)==="CONECT"){const d=parseInt(n[e].slice(6,11));a(11,5,d,e),a(16,5,d,e),a(21,5,d,e),a(26,5,d,e)}return c()}}const f=re.getInstance(),k=new J,O=I.initRenderer(f),T=I.initCamera(f),pe=new ae(T,O.domElement),H=new de,x=new ce,w=new K,me=new ne,Y=new W,j=new Z,L=new $,D=new $;ue();N();function ue(){x.setSize(f.width,f.height),x.domElement.style.position="absolute",x.domElement.style.top="0px",x.domElement.style.pointerEvents="none",document.body.appendChild(x.domElement);const y=new le;T.position.set(1,5,10),f.onResize(function(){I.onResize(f,T,O),x.setSize(f.width,f.height)}),new Z;const o=new X(16777215,1);o.position.set(1,1,1),k.add(o);const p=new X(16777215,1);p.position.set(-1,-1,1),k.add(p),k.add(w),H.setPath("/models/pdb/");const C={Ethanol:"ethanol.pdb",Aspirin:"aspirin.pdb",Caffeine:"caffeine.pdb",Nicotine:"nicotine.pdb",LSD:"lsd.pdb",Cocaine:"cocaine.pdb",Cholesterol:"cholesterol.pdb",Lycopene:"lycopene.pdb",Glucose:"glucose.pdb","Aluminium oxide":"Al2O3.pdb",Cubane:"cubane.pdb",Copper:"cu.pdb",Fluorite:"caf2.pdb",Salt:"nacl.pdb","YBCO superconductor":"ybco.pdb",Buckyball:"buckyball.pdb",Graphite:"graphite.pdb"},m={molecule:"caffeine.pdb"};y.add(m,"molecule",C).onChange(q),q("caffeine.pdb")}function q(y){for(;w.children.length>0;){const o=w.children[0];o.parent?.remove(o)}H.load(y,function(o){const p=o.json.atoms,C=new Q(.2),m=new ee(.05,.05,.05),a=new te({color:16777215}),c=o.geometryAtoms.attributes.position,A=o.geometryAtoms.attributes.color,l=new oe(C,a,c.count);for(let t=0;t<c.count;t++){L.set(c.getX(t),c.getY(t),c.getZ(t)),Y.setPosition(L),j.setRGB(A.getX(t),A.getY(t),A.getZ(t)),l.setMatrixAt(t,Y),l.setColorAt(t,j);const s=p[t],n=document.createElement("div");n.className="label",n.style.color=`rgb(${s[3][0]}, ${s[3][1]}, ${s[3][2]})`,n.textContent=s[4];const e=new ie(n);e.position.set(s[0],s[1],s[2]),w.add(e)}w.add(l);const i=o.geometryBonds.attributes.position;for(let t=0;t<i.count;t+=2){L.set(i.getX(t),i.getY(t),i.getZ(t)),D.set(i.getX(t+1),i.getY(t+1),i.getZ(t+1));const s=new se(m,a);s.position.copy(L),s.position.lerp(D,.5),s.scale.set(1,1,L.distanceTo(D)*10),s.lookAt(D),w.add(s)}})}function N(){O.render(k,T),x.render(k,T),pe.update();const y=me.getElapsedTime();w.rotation.x=y*.3,w.rotation.y=y*.1,requestAnimationFrame(N)}
